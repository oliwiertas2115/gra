<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Brawl Clicker: Ultra Edition</title>
    <style>
        :root {
            --gold: linear-gradient(180deg, #FFD700 0%, #FFA500 100%);
            --blue-bg: radial-gradient(circle, #0051ff 0%, #002266 100%);
            --glass: rgba(255, 255, 255, 0.15);
            --brawl-font: 'Arial Black', sans-serif;
        }

        body {
            margin: 0; font-family: var(--brawl-font); background: var(--blue-bg);
            color: white; overflow: hidden; user-select: none; touch-action: manipulation;
        }

        /* --- UI COMPONENTS --- */
        .top-bar {
            display: flex; justify-content: space-around; padding: 15px;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(10px);
            border-bottom: 3px solid rgba(255,255,255,0.2);
        }

        .stat-item {
            background: rgba(0,0,0,0.5); padding: 8px 20px; border-radius: 30px;
            border: 2px solid white; font-size: 18px; display: flex; align-items: center; gap: 8px;
        }

        .view { height: calc(100vh - 80px); display: flex; flex-direction: column; align-items: center; padding: 20px; transition: 0.3s; }
        .hidden { display: none !important; }

        /* --- LOBBY --- */
        .character-stage { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .main-img { 
            width: 250px; filter: drop-shadow(0 0 30px rgba(255,255,255,0.4));
            animation: heroFloat 3s ease-in-out infinite;
        }
        @keyframes heroFloat { 0%, 100% { transform: translateY(0) rotate(2deg); } 50% { transform: translateY(-20px) rotate(-2deg); } }

        .power-tag { background: #00ff00; color: black; padding: 5px 20px; border-radius: 10px; margin-top: -20px; z-index: 10; border: 2px solid white; }

        .main-nav { width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 20px; box-sizing: border-box; }
        
        .btn-round { width: 80px; height: 80px; border-radius: 20px; border: 4px solid white; color: white; cursor: pointer; font-size: 12px; }
        .btn-pass { background: #ff00ff; }
        .btn-road { background: #00ffff; color: black; }

        .play-btn {
            background: var(--gold); border: 5px solid white; padding: 20px 80px;
            font-size: 35px; border-radius: 50px; color: #333; cursor: pointer;
            box-shadow: 0 10px 0 #cc8800, 0 15px 30px rgba(0,0,0,0.5);
            text-shadow: 1px 1px white; transition: 0.1s;
        }
        .play-btn:active { transform: translateY(5px); box-shadow: 0 5px 0 #cc8800; }

        /* --- BATTLE --- */
        .enemy-box { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; }
        .hp-bar { width: 90%; height: 35px; background: #222; border: 4px solid white; border-radius: 20px; position: relative; overflow: hidden; margin-bottom: 40px; }
        #hp-fill { height: 100%; width: 100%; background: linear-gradient(90deg, #ff0000, #ff6666); transition: width 0.1s; }
        
        .boss-img { width: 220px; transition: transform 0.05s; }
        .boss-img:active { transform: scale(0.85); }

        .super-bar { width: 200px; height: 60px; background: #333; border: 4px solid white; border-radius: 30px; position: relative; overflow: hidden; cursor: pointer; }
        #super-fill { height: 100%; width: 0%; background: #ffff00; transition: width 0.2s; }
        #super-text { position: absolute; width: 100%; text-align: center; line-height: 60px; color: white; font-size: 20px; pointer-events: none; }

        /* --- ROAD & PASS --- */
        .scroll-view { background: rgba(0,0,0,0.8); width: 90%; height: 80%; border-radius: 20px; overflow-y: auto; padding: 20px; border: 3px solid white; }
        .reward-card { 
            background: var(--glass); margin-bottom: 15px; padding: 15px; border-radius: 15px;
            display: flex; justify-content: space-between; align-items: center; border-left: 10px solid #555;
        }
        .reward-card.claimed { border-left-color: #00ff00; opacity: 0.7; }
        .claim-btn { background: #00ff00; border: none; padding: 10px 20px; border-radius: 10px; font-weight: bold; cursor: pointer; }

        /* --- ANIMATIONS --- */
        .dmg-popup { position: absolute; color: #ffff00; font-size: 40px; font-weight: bold; pointer-events: none; animation: pop 0.6s ease-out forwards; z-index: 100; text-shadow: 2px 2px black; }
        @keyframes pop { 0% { opacity: 1; transform: translateY(0) scale(1); } 100% { opacity: 0; transform: translateY(-150px) scale(1.5); } }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="stat-item">üèÜ <span id="trophies">0</span></div>
        <div class="stat-item">üí∞ <span id="coins">100</span></div>
        <div class="stat-item">üíé <span id="gems">0</span></div>
    </div>

    <div id="lobby" class="view">
        <div class="character-stage">
            <img id="char-img" class="main-img" src="https://wiki.brawlstars.com/images/thumb/Shelly_Skin-Default.png/200px-Shelly_Skin-Default.png">
            <div class="power-tag">MOC <span id="power-lvl">1</span></div>
            <h1 id="char-name" style="font-size: 40px; margin: 10px; text-shadow: 3px 3px #000;">SHELLY</h1>
        </div>
        
        <div class="main-nav">
            <button class="btn-round btn-road" onclick="openView('road')">ALEJA<br>NAGR√ìD</button>
            <button class="play-btn" onclick="startBattle()">ZAGRAJ</button>
            <button class="btn-round btn-pass" onclick="openView('pass')">BRAWL<br>PASS</button>
        </div>
        <button onclick="upgrade()" style="background: #ffaa00; border: none; padding: 10px; border-radius: 10px; cursor: pointer;">ULEPSZ (50üí∞)</button>
    </div>

    <div id="battle" class="view hidden">
        <div class="enemy-box">
            <div class="hp-bar"><div id="hp-fill"></div></div>
            <img id="boss-img" class="boss-img" src="https://wiki.brawlstars.com/images/thumb/Robot_Melee.png/200px-Robot_Melee.png" onclick="attack(event)">
        </div>
        <div class="super-bar" onclick="activateSuper()">
            <div id="super-fill"></div>
            <div id="super-text">SUPER: 0%</div>
        </div>
    </div>

    <div id="road" class="view hidden">
        <h2>ALEJA PUCHAR√ìW</h2>
        <div class="scroll-view" id="road-list"></div>
        <button class="play-btn" onclick="openView('lobby')" style="margin-top: 20px; font-size: 20px;">POWR√ìT</button>
    </div>

    <div id="pass" class="view hidden">
        <h2>BRAWL PASS (SEZON 1)</h2>
        <div class="scroll-view" id="pass-list"></div>
        <button class="play-btn" onclick="openView('lobby')" style="margin-top: 20px; font-size: 20px;">POWR√ìT</button>
    </div>

    <script>
        let data = {
            trophies: 0, coins: 100, gems: 0, power: 1, xp: 0,
            roadClaimed: [], passClaimed: []
        };

        const roadRewards = [
            { t: 10, gift: "100 Monet", type: "coins", val: 100 },
            { t: 50, gift: "5 Gem√≥w", type: "gems", val: 5 },
            { t: 100, gift: "Postaƒá: COLT", type: "char", val: "Colt" },
            { t: 500, gift: "Mega Skrzynka", type: "coins", val: 1000 }
        ];

        const passRewards = [
            { xp: 50, gift: "Darmowe Monety", type: "coins", val: 50 },
            { xp: 150, gift: "Super Gemy", type: "gems", val: 20 }
        ];

        let bossHP = 100, maxHP = 100, superCharge = 0;

        function updateUI() {
            document.getElementById('trophies').innerText = data.trophies;
            document.getElementById('coins').innerText = data.coins;
            document.getElementById('gems').innerText = data.gems;
            document.getElementById('power-lvl').innerText = data.power;
            save();
        }

        function openView(id) {
            document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            if(id === 'road') renderRoad();
            if(id === 'pass') renderPass();
        }

        function startBattle() {
            maxHP = 500 + (data.trophies * 10);
            bossHP = maxHP;
            superCharge = 0;
            updateHP();
            updateSuperUI();
            openView('battle');
        }

        function attack(e) {
            let damage = 10 * data.power;
            bossHP -= damage;
            superCharge = Math.min(100, superCharge + 4);
            
            createPop(e.clientX, e.clientY, damage);
            updateHP();
            updateSuperUI();

            if(bossHP <= 0) finish(true);
        }

        function updateHP() {
            document.getElementById('hp-fill').style.width = (bossHP/maxHP)*100 + "%";
        }

        function updateSuperUI() {
            document.getElementById('super-fill').style.width = superCharge + "%";
            document.getElementById('super-text').innerText = superCharge >= 100 ? "U≈ªYJ SUPERA!" : `SUPER: ${superCharge}%`;
        }

        function activateSuper() {
            if(superCharge < 100) return;
            bossHP -= (100 * data.power);
            superCharge = 0;
            document.body.style.background = "white";
            setTimeout(() => document.body.style.background = "", 100);
            updateHP();
            updateSuperUI();
            if(bossHP <= 0) finish(true);
        }

        function finish(win) {
            if(win) {
                data.trophies += 10;
                data.coins += 15;
                data.xp += 20;
            } else {
                data.trophies = Math.max(0, data.trophies - Math.floor(Math.random()*6 + 1));
            }
            updateUI();
            openView('lobby');
        }

        function upgrade() {
            if(data.coins >= 50) {
                data.coins -= 50;
                data.power++;
                updateUI();
            }
        }

        function renderRoad() {
            let container = document.getElementById('road-list');
            container.innerHTML = "";
            roadRewards.forEach((r, i) => {
                let isClaimed = data.roadClaimed.includes(i);
                let canClaim = data.trophies >= r.t && !isClaimed;
                container.innerHTML += `
                    <div class="reward-card ${isClaimed ? 'claimed' : ''}">
                        <div><b>${r.t} üèÜ</b><br>${r.gift}</div>
                        ${canClaim ? `<button class="claim-btn" onclick="claimRoad(${i})">ODBIERZ</button>` : ''}
                    </div>`;
            });
        }

        function claimRoad(i) {
            let r = roadRewards[i];
            if(r.type === 'coins') data.coins += r.val;
            if(r.type === 'gems') data.gems += r.val;
            data.roadClaimed.push(i);
            updateUI();
            renderRoad();
        }

        function createPop(x, y, d) {
            let p = document.createElement('div');
            p.className = 'dmg-popup';
            p.innerText = d;
            p.style.left = x + 'px'; p.style.top = y + 'px';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 600);
        }

        function save() { localStorage.setItem('brawlSave', JSON.stringify(data)); }
        function load() {
            let s = localStorage.getItem('brawlSave');
            if(s) data = JSON.parse(s);
            updateUI();
        }

        window.onload = load;
    </script>
</body>
</html>
